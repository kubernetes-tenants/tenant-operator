import{_ as a,c as s,o as t,a2 as n}from"./chunks/framework.BmhNuda9.js";const m=JSON.parse('{"title":"Advanced Use Cases","description":"","frontmatter":{},"headers":[],"relativePath":"advanced-use-cases.md","filePath":"advanced-use-cases.md","lastUpdated":1762850800000}'),r={name:"advanced-use-cases.md"};function l(o,e,i,p,c,d){return t(),s("div",null,[...e[0]||(e[0]=[n(`<h1 id="advanced-use-cases" tabindex="-1">Advanced Use Cases <a class="header-anchor" href="#advanced-use-cases" aria-label="Permalink to &quot;Advanced Use Cases&quot;">​</a></h1><h2 id="overview" tabindex="-1">Overview <a class="header-anchor" href="#overview" aria-label="Permalink to &quot;Overview&quot;">​</a></h2><p>Tenant Operator&#39;s flexible architecture enables powerful multi-tenant patterns beyond basic resource provisioning. This guide helps you understand which pattern fits your requirements.</p><h2 id="available-patterns" tabindex="-1">Available Patterns <a class="header-anchor" href="#available-patterns" aria-label="Permalink to &quot;Available Patterns&quot;">​</a></h2><h3 id="_1-custom-domain-provisioning" tabindex="-1">1. Custom Domain Provisioning <a class="header-anchor" href="#_1-custom-domain-provisioning" aria-label="Permalink to &quot;1. Custom Domain Provisioning&quot;">​</a></h3><p><strong>Use when:</strong> Each tenant needs their own custom domain with automatic DNS and SSL.</p><p><strong>Key features:</strong></p><ul><li>Automatic DNS record creation via External DNS</li><li>Domain verification workflows</li><li>Let&#39;s Encrypt SSL certificates</li><li>CNAME delegation support</li></ul><p><strong>Best for:</strong> SaaS platforms where customers bring their own domains.</p><p><strong><a href="/use-case-custom-domains.html">Read full guide →</a></strong></p><hr><h3 id="_2-multi-tier-application-stack" tabindex="-1">2. Multi-Tier Application Stack <a class="header-anchor" href="#_2-multi-tier-application-stack" aria-label="Permalink to &quot;2. Multi-Tier Application Stack&quot;">​</a></h3><p><strong>Use when:</strong> Your application has multiple services (web, API, workers, data) that need coordinated deployment.</p><p><strong>Key features:</strong></p><ul><li>Separate templates per tier</li><li>Independent scaling per tier</li><li>Different policies per tier</li><li>Coordinated lifecycle management</li></ul><p><strong>Best for:</strong> Complex applications with multiple service tiers.</p><p><strong><a href="/use-case-multi-tier.html">Read full guide →</a></strong></p><hr><h3 id="_3-blue-green-deployments" tabindex="-1">3. Blue-Green Deployments <a class="header-anchor" href="#_3-blue-green-deployments" aria-label="Permalink to &quot;3. Blue-Green Deployments&quot;">​</a></h3><p><strong>Use when:</strong> You need zero-downtime deployments with instant rollback capability.</p><p><strong>Key features:</strong></p><ul><li>Two complete environments (blue and green)</li><li>Traffic switch via Service selector</li><li>Test new versions before going live</li><li>Instant rollback by switching back</li></ul><p><strong>Best for:</strong> Production systems requiring zero-downtime updates.</p><p><strong><a href="/use-case-blue-green.html">Read full guide →</a></strong></p><hr><h3 id="_4-database-per-tenant" tabindex="-1">4. Database-per-Tenant <a class="header-anchor" href="#_4-database-per-tenant" aria-label="Permalink to &quot;4. Database-per-Tenant&quot;">​</a></h3><p><strong>Use when:</strong> Each tenant needs complete data isolation with dedicated database instances.</p><p><strong>Key features:</strong></p><ul><li>Automatic RDS/Cloud SQL provisioning via Crossplane</li><li>Connection secret management</li><li>Plan-based database sizing</li><li>Retention policies for data safety</li></ul><p><strong>Best for:</strong> Compliance-heavy industries requiring complete data isolation.</p><p><strong><a href="/use-case-database-per-tenant.html">Read full guide →</a></strong></p><hr><h3 id="_5-dynamic-feature-flags" tabindex="-1">5. Dynamic Feature Flags <a class="header-anchor" href="#_5-dynamic-feature-flags" aria-label="Permalink to &quot;5. Dynamic Feature Flags&quot;">​</a></h3><p><strong>Use when:</strong> You want to enable/disable features per tenant without redeployment.</p><p><strong>Key features:</strong></p><ul><li>Application-level flags via environment variables</li><li>Infrastructure-level flags via database views</li><li>A/B testing support</li><li>Plan-based feature gating</li></ul><p><strong>Best for:</strong> SaaS platforms with multiple subscription tiers or gradual feature rollouts.</p><p><strong><a href="/use-case-feature-flags.html">Read full guide →</a></strong></p><h2 id="pattern-selection-guide" tabindex="-1">Pattern Selection Guide <a class="header-anchor" href="#pattern-selection-guide" aria-label="Permalink to &quot;Pattern Selection Guide&quot;">​</a></h2><h3 id="by-deployment-strategy" tabindex="-1">By Deployment Strategy <a class="header-anchor" href="#by-deployment-strategy" aria-label="Permalink to &quot;By Deployment Strategy&quot;">​</a></h3><table tabindex="0"><thead><tr><th>Requirement</th><th>Recommended Pattern</th></tr></thead><tbody><tr><td>Zero-downtime updates</td><td><a href="/use-case-blue-green.html">Blue-Green Deployments</a></td></tr><tr><td>Multiple service tiers</td><td><a href="/use-case-multi-tier.html">Multi-Tier Stack</a></td></tr></tbody></table><h3 id="by-infrastructure-needs" tabindex="-1">By Infrastructure Needs <a class="header-anchor" href="#by-infrastructure-needs" aria-label="Permalink to &quot;By Infrastructure Needs&quot;">​</a></h3><table tabindex="0"><thead><tr><th>Requirement</th><th>Recommended Pattern</th></tr></thead><tbody><tr><td>Custom domains per tenant</td><td><a href="/use-case-custom-domains.html">Custom Domain Provisioning</a></td></tr><tr><td>Dedicated databases</td><td><a href="/use-case-database-per-tenant.html">Database-per-Tenant</a></td></tr><tr><td>Optional expensive features</td><td><a href="/use-case-feature-flags.html">Feature Flags</a> (Pattern 2)</td></tr></tbody></table><h3 id="by-business-model" tabindex="-1">By Business Model <a class="header-anchor" href="#by-business-model" aria-label="Permalink to &quot;By Business Model&quot;">​</a></h3><table tabindex="0"><thead><tr><th>Business Model</th><th>Recommended Patterns</th></tr></thead><tbody><tr><td>SaaS with subscription tiers</td><td><a href="/use-case-feature-flags.html">Feature Flags</a> + <a href="/use-case-custom-domains.html">Custom Domains</a></td></tr><tr><td>Enterprise B2B</td><td><a href="/use-case-database-per-tenant.html">Database-per-Tenant</a> + <a href="/use-case-multi-tier.html">Multi-Tier</a></td></tr><tr><td>High-traffic consumer app</td><td><a href="/use-case-blue-green.html">Blue-Green Deployments</a> + <a href="/use-case-feature-flags.html">Feature Flags</a></td></tr></tbody></table><h2 id="combining-patterns" tabindex="-1">Combining Patterns <a class="header-anchor" href="#combining-patterns" aria-label="Permalink to &quot;Combining Patterns&quot;">​</a></h2><p>Many use cases benefit from combining multiple patterns:</p><h3 id="saas-platform-recommended-stack" tabindex="-1">SaaS Platform (Recommended Stack) <a class="header-anchor" href="#saas-platform-recommended-stack" aria-label="Permalink to &quot;SaaS Platform (Recommended Stack)&quot;">​</a></h3><ol><li><strong>Multi-Tier Stack</strong> - Separate web, API, worker, data tiers</li><li><strong>Custom Domains</strong> - Each customer gets their own domain</li><li><strong>Feature Flags</strong> - Different features per subscription plan</li><li><strong>Blue-Green Deployments</strong> - Safe deployment of new versions</li></ol><h3 id="enterprise-platform" tabindex="-1">Enterprise Platform <a class="header-anchor" href="#enterprise-platform" aria-label="Permalink to &quot;Enterprise Platform&quot;">​</a></h3><ol><li><strong>Database-per-Tenant</strong> - Complete data isolation</li><li><strong>Multi-Tier Stack</strong> - Complex application architecture</li><li><strong>Blue-Green</strong> - Zero-downtime updates for mission-critical systems</li></ol><h3 id="startup-growth-stage" tabindex="-1">Startup/Growth Stage <a class="header-anchor" href="#startup-growth-stage" aria-label="Permalink to &quot;Startup/Growth Stage&quot;">​</a></h3><ol><li><strong>Feature Flags</strong> - Rapid iteration and A/B testing</li><li><strong>Custom Domains</strong> - Professional branding for customers</li><li><strong>Blue-Green Deployments</strong> - Safe scaling as you grow</li></ol><h2 id="implementation-best-practices" tabindex="-1">Implementation Best Practices <a class="header-anchor" href="#implementation-best-practices" aria-label="Permalink to &quot;Implementation Best Practices&quot;">​</a></h2><h3 id="_1-start-simple" tabindex="-1">1. Start Simple <a class="header-anchor" href="#_1-start-simple" aria-label="Permalink to &quot;1. Start Simple&quot;">​</a></h3><p>Begin with a single pattern that addresses your most critical need, then add more as requirements grow.</p><h3 id="_2-use-database-views" tabindex="-1">2. Use Database Views <a class="header-anchor" href="#_2-use-database-views" aria-label="Permalink to &quot;2. Use Database Views&quot;">​</a></h3><p>For complex filtering logic, create database views rather than trying to implement logic in templates.</p><div class="language-sql line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#6A737D;">-- Example: Filter tenants by plan and feature</span></span>
<span class="line"><span style="color:#F97583;">CREATE OR REPLACE</span><span style="color:#F97583;"> VIEW</span><span style="color:#B392F0;"> enterprise_with_ai</span><span style="color:#F97583;"> AS</span></span>
<span class="line"><span style="color:#F97583;">SELECT</span><span style="color:#F97583;"> *</span><span style="color:#F97583;"> FROM</span><span style="color:#E1E4E8;"> tenants</span></span>
<span class="line"><span style="color:#F97583;">WHERE</span><span style="color:#E1E4E8;"> plan_type </span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;"> &#39;enterprise&#39;</span></span>
<span class="line"><span style="color:#F97583;">  AND</span><span style="color:#E1E4E8;"> feature_ai_enabled </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> TRUE</span></span>
<span class="line"><span style="color:#F97583;">  AND</span><span style="color:#E1E4E8;"> is_active </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> TRUE;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="_3-leverage-cross-namespace-resources" tabindex="-1">3. Leverage Cross-Namespace Resources <a class="header-anchor" href="#_3-leverage-cross-namespace-resources" aria-label="Permalink to &quot;3. Leverage Cross-Namespace Resources&quot;">​</a></h3><p>Use <code>targetNamespace</code> to organize resources across namespaces for better isolation.</p><div class="language-yaml line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#85E89D;">deployments</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">  - </span><span style="color:#85E89D;">id</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">app</span></span>
<span class="line"><span style="color:#85E89D;">    nameTemplate</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;{{ .uid }}-app&quot;</span></span>
<span class="line"><span style="color:#85E89D;">    targetNamespace</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;tenant-{{ .uid }}&quot;</span><span style="color:#6A737D;">  # Creates in tenant&#39;s namespace</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="_4-set-appropriate-policies" tabindex="-1">4. Set Appropriate Policies <a class="header-anchor" href="#_4-set-appropriate-policies" aria-label="Permalink to &quot;4. Set Appropriate Policies&quot;">​</a></h3><p>Choose policies based on resource type:</p><ul><li><strong>Databases</strong>: <code>creationPolicy: Once</code>, <code>deletionPolicy: Retain</code></li><li><strong>Configurations</strong>: <code>creationPolicy: WhenNeeded</code>, <code>deletionPolicy: Delete</code></li><li><strong>Temporary resources</strong>: <code>creationPolicy: WhenNeeded</code>, <code>deletionPolicy: Delete</code></li></ul><h3 id="_5-monitor-everything" tabindex="-1">5. Monitor Everything <a class="header-anchor" href="#_5-monitor-everything" aria-label="Permalink to &quot;5. Monitor Everything&quot;">​</a></h3><p>Set up comprehensive monitoring for:</p><ul><li>Resource provisioning status</li><li>Feature usage per tenant</li><li>Deployment progression</li><li>Cost per tenant</li></ul><h2 id="common-pitfalls" tabindex="-1">Common Pitfalls <a class="header-anchor" href="#common-pitfalls" aria-label="Permalink to &quot;Common Pitfalls&quot;">​</a></h2><h3 id="❌-don-t-use-yaml-level-conditionals" tabindex="-1">❌ Don&#39;t: Use YAML-level conditionals <a class="header-anchor" href="#❌-don-t-use-yaml-level-conditionals" aria-label="Permalink to &quot;❌ Don&#39;t: Use YAML-level conditionals&quot;">​</a></h3><p>Templates are for <strong>values</strong>, not for conditional YAML structure.</p><div class="language-yaml line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#6A737D;"># ❌ This doesn&#39;t work</span></span>
<span class="line"><span style="color:#E1E4E8;">{{- </span><span style="color:#9ECBFF;">if .featureEnabled</span><span style="color:#E1E4E8;"> }}</span></span>
<span class="line"><span style="color:#85E89D;">deployments</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">  - </span><span style="color:#85E89D;">id</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">feature-deployment</span></span>
<span class="line"><span style="color:#E1E4E8;">{{- </span><span style="color:#9ECBFF;">end</span><span style="color:#E1E4E8;"> }}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="✅-do-use-database-views-and-separate-templates" tabindex="-1">✅ Do: Use database views and separate templates <a class="header-anchor" href="#✅-do-use-database-views-and-separate-templates" aria-label="Permalink to &quot;✅ Do: Use database views and separate templates&quot;">​</a></h3><div class="language-sql line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#6A737D;">-- Database view</span></span>
<span class="line"><span style="color:#F97583;">CREATE</span><span style="color:#F97583;"> VIEW</span><span style="color:#B392F0;"> tenants_with_feature</span><span style="color:#F97583;"> AS</span></span>
<span class="line"><span style="color:#F97583;">SELECT</span><span style="color:#F97583;"> *</span><span style="color:#F97583;"> FROM</span><span style="color:#E1E4E8;"> tenants </span><span style="color:#F97583;">WHERE</span><span style="color:#E1E4E8;"> feature_enabled </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> TRUE;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><div class="language-yaml line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#6A737D;"># Separate TenantRegistry and Template</span></span>
<span class="line"><span style="color:#85E89D;">apiVersion</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">operator.kubernetes-tenants.org/v1</span></span>
<span class="line"><span style="color:#85E89D;">kind</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">TenantRegistry</span></span>
<span class="line"><span style="color:#85E89D;">metadata</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#85E89D;">  name</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">feature-enabled-tenants</span></span>
<span class="line"><span style="color:#85E89D;">spec</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#85E89D;">  source</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#85E89D;">    mysql</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#85E89D;">      table</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">tenants_with_feature</span><span style="color:#6A737D;">  # Use the view</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h3 id="❌-don-t-store-complex-logic-in-tenantregistry" tabindex="-1">❌ Don&#39;t: Store complex logic in TenantRegistry <a class="header-anchor" href="#❌-don-t-store-complex-logic-in-tenantregistry" aria-label="Permalink to &quot;❌ Don&#39;t: Store complex logic in TenantRegistry&quot;">​</a></h3><p>The registry should only read and map data, not transform it.</p><h3 id="✅-do-use-database-views-for-complex-queries" tabindex="-1">✅ Do: Use database views for complex queries <a class="header-anchor" href="#✅-do-use-database-views-for-complex-queries" aria-label="Permalink to &quot;✅ Do: Use database views for complex queries&quot;">​</a></h3><p>Move JOIN operations and complex filtering to database views.</p><h2 id="getting-help" tabindex="-1">Getting Help <a class="header-anchor" href="#getting-help" aria-label="Permalink to &quot;Getting Help&quot;">​</a></h2><ul><li><strong>Documentation Issues</strong>: <a href="https://github.com/kubernetes-tenants/tenant-operator/issues" target="_blank" rel="noreferrer">Report on GitHub</a></li><li><strong>Architecture Questions</strong>: Review <a href="/architecture.html">Architecture Guide</a></li><li><strong>Template Help</strong>: See <a href="/templates.html">Templates Guide</a></li><li><strong>Policy Questions</strong>: Check <a href="/policies.html">Policies Documentation</a></li></ul><h2 id="next-steps" tabindex="-1">Next Steps <a class="header-anchor" href="#next-steps" aria-label="Permalink to &quot;Next Steps&quot;">​</a></h2><ol><li>Review the pattern that best matches your needs</li><li>Study the full guide for that pattern</li><li>Adapt the example to your requirements</li><li>Start with a single tenant for testing</li><li>Gradually roll out to more tenants</li></ol><h2 id="contributing" tabindex="-1">Contributing <a class="header-anchor" href="#contributing" aria-label="Permalink to &quot;Contributing&quot;">​</a></h2><p>Have a use case not covered here? We&#39;d love to hear about it!</p><ul><li><strong>Open an Issue</strong>: <a href="https://github.com/kubernetes-tenants/tenant-operator/issues" target="_blank" rel="noreferrer">GitHub Issues</a></li><li><strong>Share Your Story</strong>: Contribute a use case guide</li><li><strong>Join Discussions</strong>: Share your experience with the community</li></ul>`,86)])])}const h=a(r,[["render",l]]);export{m as __pageData,h as default};
