import{_ as n,c as r,o as i,a3 as t,j as e,a}from"./chunks/framework.By6ErOX9.js";const b=JSON.parse('{"title":"Glossary","description":"","frontmatter":{},"headers":[],"relativePath":"glossary.md","filePath":"glossary.md","lastUpdated":1763011429000}'),l={name:"glossary.md"};function s(c,o,d,p,u,h){return i(),r("div",null,[...o[0]||(o[0]=[t(`<h1 id="glossary" tabindex="-1">Glossary <a class="header-anchor" href="#glossary" aria-label="Permalink to &quot;Glossary&quot;">​</a></h1><p>Comprehensive reference of terms and concepts used in Lynq.</p><nav class="table-of-contents"><ul><li><a href="#core-concepts">Core Concepts</a><ul><li><a href="#lynq">Lynq</a></li><li><a href="#multi-node">Multi-Node</a></li><li><a href="#operator-pattern">Operator Pattern</a></li></ul></li><li><a href="#custom-resource-definitions-crds">Custom Resource Definitions (CRDs)</a><ul><li><a href="#lynqhub">LynqHub</a></li><li><a href="#lynqform">LynqForm</a></li><li><a href="#lynqnode">LynqNode</a></li></ul></li><li><a href="#data-source-concepts">Data Source Concepts</a><ul><li><a href="#data-source">Data Source</a></li><li><a href="#syncinterval">syncInterval</a></li><li><a href="#valuemappings">valueMappings</a></li><li><a href="#extravaluemappings">extraValueMappings</a></li><li><a href="#activate-column">activate Column</a></li><li><a href="#mysql-view">MySQL VIEW</a></li></ul></li><li><a href="#template-system">Template System</a><ul><li><a href="#template">Template</a></li><li><a href="#template-variables">Template Variables</a></li><li><a href="#template-functions">Template Functions</a></li><li><a href="#nametemplate">nameTemplate</a></li></ul></li><li><a href="#resource-management">Resource Management</a><ul><li><a href="#server-side-apply-ssa">Server-Side Apply (SSA)</a></li><li><a href="#fieldmanager">fieldManager</a></li><li><a href="#tresource">TResource</a></li><li><a href="#ownerreference">ownerReference</a></li><li><a href="#drift-detection">Drift Detection</a></li></ul></li><li><a href="#policies">Policies</a><ul><li><a href="#creationpolicy">CreationPolicy</a></li><li><a href="#deletionpolicy">DeletionPolicy</a></li><li><a href="#conflictpolicy">ConflictPolicy</a></li><li><a href="#node">Node</a></li><li><a href="#patchstrategy">PatchStrategy</a></li></ul></li><li><a href="#dependency-management">Dependency Management</a><ul><li><a href="#dependids">dependIds</a></li><li><a href="#dependency-graph-dag">Dependency Graph (DAG)</a></li><li><a href="#topological-sort">Topological Sort</a></li></ul></li><li><a href="#resource-readiness">Resource Readiness</a><ul><li><a href="#waitforready">waitForReady</a></li><li><a href="#timeoutseconds">timeoutSeconds</a></li><li><a href="#ready-condition">Ready Condition</a></li></ul></li><li><a href="#status-and-observability">Status and Observability</a><ul><li><a href="#lynqnode-status">LynqNode Status</a></li><li><a href="#hub-status">Hub Status</a></li><li><a href="#reconciliation">Reconciliation</a></li><li><a href="#requeue">Requeue</a></li></ul></li><li><a href="#multi-form-support">Multi-Form Support</a><ul><li><a href="#multi-form">Multi-Form</a></li><li><a href="#referencing-forms">Referencing Forms</a></li><li><a href="#desired-count-calculation">Desired Count Calculation</a></li></ul></li><li><a href="#performance-optimization">Performance Optimization</a><ul><li><a href="#smart-watch-predicates">Smart Watch Predicates</a></li><li><a href="#namespace-tracking">Namespace Tracking</a></li><li><a href="#concurrency">Concurrency</a></li></ul></li><li><a href="#webhooks-and-validation">Webhooks and Validation</a><ul><li><a href="#webhook">Webhook</a></li><li><a href="#cert-manager">cert-manager</a></li><li><a href="#validation-rules">Validation Rules</a></li></ul></li><li><a href="#garbage-collection-and-finalizers">Garbage Collection and Finalizers</a><ul><li><a href="#finalizer">Finalizer</a></li><li><a href="#cascade-deletion">Cascade Deletion</a></li></ul></li><li><a href="#kubernetes-concepts">Kubernetes Concepts</a><ul><li><a href="#custom-resource-definition-crd">Custom Resource Definition (CRD)</a></li><li><a href="#controller">Controller</a></li><li><a href="#reconciliation-loop">Reconciliation Loop</a></li><li><a href="#leader-election">Leader Election</a></li><li><a href="#kubernetes-api-server">Kubernetes API Server</a></li><li><a href="#etcd">etcd</a></li></ul></li><li><a href="#development-and-operations">Development and Operations</a><ul><li><a href="#minikube">Minikube</a></li><li><a href="#server-side-apply-ssa-engine">Server-Side Apply (SSA) Engine</a></li><li><a href="#apply-engine">Apply Engine</a></li><li><a href="#template-engine">Template Engine</a></li></ul></li><li><a href="#metrics-and-monitoring">Metrics and Monitoring</a><ul><li><a href="#prometheus-metrics">Prometheus Metrics</a></li><li><a href="#health-checks">Health Checks</a></li></ul></li><li><a href="#common-abbreviations">Common Abbreviations</a></li><li><a href="#see-also">See Also</a></li></ul></nav><h2 id="core-concepts" tabindex="-1">Core Concepts <a class="header-anchor" href="#core-concepts" aria-label="Permalink to &quot;Core Concepts&quot;">​</a></h2><h3 id="lynq" tabindex="-1">Lynq <a class="header-anchor" href="#lynq" aria-label="Permalink to &quot;Lynq&quot;">​</a></h3><p>A Kubernetes operator that automates database-driven infrastructure provisioning by synchronizing node data from external data sources (MySQL, PostgreSQL) and creating Kubernetes resources using template-based declarative configuration.</p><h3 id="multi-node" tabindex="-1">Multi-Node <a class="header-anchor" href="#multi-node" aria-label="Permalink to &quot;Multi-Node&quot;">​</a></h3><p>An architectural pattern where a single instance of software serves multiple customers (nodes), each with isolated resources and data. Previously called &quot;Multi-Tenancy&quot; in earlier versions.</p><h3 id="operator-pattern" tabindex="-1">Operator Pattern <a class="header-anchor" href="#operator-pattern" aria-label="Permalink to &quot;Operator Pattern&quot;">​</a></h3><p>A Kubernetes design pattern that uses custom controllers to extend Kubernetes functionality by automating application-specific operational knowledge.</p><h2 id="custom-resource-definitions-crds" tabindex="-1">Custom Resource Definitions (CRDs) <a class="header-anchor" href="#custom-resource-definitions-crds" aria-label="Permalink to &quot;Custom Resource Definitions (CRDs)&quot;">​</a></h2><h3 id="lynqhub" tabindex="-1">LynqHub <a class="header-anchor" href="#lynqhub" aria-label="Permalink to &quot;LynqHub&quot;">​</a></h3><p>A Custom Resource that defines:</p><ul><li>External data source connection (MySQL, PostgreSQL)</li><li>Synchronization interval</li><li>Column mappings between database schema and operator variables</li><li>The source of truth for active node list</li></ul><p><strong>Example:</strong></p><div class="language-yaml line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#85E89D;">apiVersion</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">operator.lynq.sh/v1</span></span>
<span class="line"><span style="color:#85E89D;">kind</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">LynqHub</span></span>
<span class="line"><span style="color:#85E89D;">metadata</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#85E89D;">  name</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">my-hub</span></span>
<span class="line"><span style="color:#85E89D;">spec</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#85E89D;">  source</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#85E89D;">    type</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">mysql</span></span>
<span class="line"><span style="color:#85E89D;">    syncInterval</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">1m</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="lynqform" tabindex="-1">LynqForm <a class="header-anchor" href="#lynqform" aria-label="Permalink to &quot;LynqForm&quot;">​</a></h3><p>A Custom Resource that defines:</p><ul><li>Resource blueprints for node provisioning</li><li>Template definitions for Kubernetes resources</li><li>Lifecycle policies (creation, deletion, conflict)</li><li>Dependency relationships between resources</li></ul><p><strong>Referenced by:</strong> LynqNode CRs <strong>References:</strong> LynqHub (via <code>hubId</code>)</p><h3 id="lynqnode" tabindex="-1">LynqNode <a class="header-anchor" href="#lynqnode" aria-label="Permalink to &quot;LynqNode&quot;">​</a></h3><p>A Custom Resource representing a single node instance. Automatically created by LynqHub controller based on active database rows. Previously called &quot;Tenant&quot; in earlier versions.</p><p><strong>Key characteristics:</strong></p><ul><li>Created/deleted automatically (users typically don&#39;t create manually)</li><li>Contains resolved resource specifications (templates already evaluated)</li><li>Tracks status of all provisioned resources</li><li>Owns created resources via ownerReferences (Delete policy) or labels (Retain policy)</li></ul><h2 id="data-source-concepts" tabindex="-1">Data Source Concepts <a class="header-anchor" href="#data-source-concepts" aria-label="Permalink to &quot;Data Source Concepts&quot;">​</a></h2><h3 id="data-source" tabindex="-1">Data Source <a class="header-anchor" href="#data-source" aria-label="Permalink to &quot;Data Source&quot;">​</a></h3><p>An external system that stores node configuration data. Currently supported:</p><ul><li><strong>MySQL</strong> (v5.7+, v8.0+)</li><li><strong>PostgreSQL</strong> (planned for v1.1)</li></ul><h3 id="syncinterval" tabindex="-1">syncInterval <a class="header-anchor" href="#syncinterval" aria-label="Permalink to &quot;syncInterval&quot;">​</a></h3><p>Duration between data source polling cycles. Defines how frequently the operator checks for node data changes.</p><p><strong>Format:</strong> Go duration string (e.g., <code>30s</code>, <code>1m</code>, <code>5m</code>) <strong>Default:</strong> 1 minute <strong>Tradeoff:</strong> Lower interval = faster synchronization, higher database load</p><h3 id="valuemappings" tabindex="-1">valueMappings <a class="header-anchor" href="#valuemappings" aria-label="Permalink to &quot;valueMappings&quot;">​</a></h3><p>Required column mappings from database to operator variables:</p><table tabindex="0"><thead><tr><th>Mapping</th><th>Database Column</th><th>Operator Variable</th><th>Description</th></tr></thead><tbody><tr><td><code>uid</code></td><td>Custom</td><td><code>.uid</code></td><td>Unique node identifier</td></tr><tr><td><code>hostOrUrl</code></td><td>Custom</td><td><code>.hostOrUrl</code>, <code>.host</code></td><td>Node URL (auto-extracts host)</td></tr><tr><td><code>activate</code></td><td>Custom</td><td><code>.activate</code></td><td>Activation flag (truthy/falsy)</td></tr></tbody></table><p><strong>Example:</strong></p><div class="language-yaml line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#85E89D;">valueMappings</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#85E89D;">  uid</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">node_id</span></span>
<span class="line"><span style="color:#85E89D;">  hostOrUrl</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">node_url</span></span>
<span class="line"><span style="color:#85E89D;">  activate</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">is_active</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="extravaluemappings" tabindex="-1">extraValueMappings <a class="header-anchor" href="#extravaluemappings" aria-label="Permalink to &quot;extraValueMappings&quot;">​</a></h3><p>Optional custom column mappings for template variables. Allows passing arbitrary database columns to templates.</p><p><strong>Example:</strong></p>`,39),e("div",null,[e("div",{class:"language-yaml line-numbers-mode"},[e("button",{title:"Copy Code",class:"copy"}),e("span",{class:"lang"},"yaml"),e("pre",{class:"shiki github-dark vp-code",tabindex:"0","v-pre":""},[e("code",null,[e("span",{class:"line"},[e("span",{style:{color:"#85E89D"}},"extraValueMappings"),e("span",{style:{color:"#E1E4E8"}},":")]),a(`
`),e("span",{class:"line"},[e("span",{style:{color:"#85E89D"}},"  planId"),e("span",{style:{color:"#E1E4E8"}},": "),e("span",{style:{color:"#9ECBFF"}},"subscription_plan"),e("span",{style:{color:"#6A737D"}},"  # Available as {{ .planId }}")]),a(`
`),e("span",{class:"line"},[e("span",{style:{color:"#85E89D"}},"  region"),e("span",{style:{color:"#E1E4E8"}},": "),e("span",{style:{color:"#9ECBFF"}},"deployment_region"),e("span",{style:{color:"#6A737D"}},"  # Available as {{ .region }}")])])]),e("div",{class:"line-numbers-wrapper","aria-hidden":"true"},[e("span",{class:"line-number"},"1"),e("br"),e("span",{class:"line-number"},"2"),e("br"),e("span",{class:"line-number"},"3"),e("br")])])],-1),t(`<h3 id="activate-column" tabindex="-1">activate Column <a class="header-anchor" href="#activate-column" aria-label="Permalink to &quot;activate Column&quot;">​</a></h3><p>A special database column that determines node activation status.</p><div class="warning custom-block"><p class="custom-block-title">Truthy values</p><table tabindex="0"><thead><tr><th>Accepted values (case-sensitive)</th><th>Result</th></tr></thead><tbody><tr><td><code>&quot;1&quot;</code></td><td>Active</td></tr><tr><td><code>&quot;true&quot;</code>, <code>&quot;TRUE&quot;</code>, <code>&quot;True&quot;</code></td><td>Active</td></tr><tr><td><code>&quot;yes&quot;</code>, <code>&quot;YES&quot;</code>, <code>&quot;Yes&quot;</code></td><td>Active</td></tr></tbody></table><p>Any other value—such as <code>&quot;0&quot;</code>, <code>&quot;false&quot;</code>, <code>&quot;active&quot;</code>, empty strings, or <code>NULL</code>—is treated as <strong>inactive</strong>.</p></div><div class="tip custom-block"><p class="custom-block-title">Normalize upstream data</p><p>Use MySQL VIEWs to transform incompatible values before the operator consumes them.</p></div><h3 id="mysql-view" tabindex="-1">MySQL VIEW <a class="header-anchor" href="#mysql-view" aria-label="Permalink to &quot;MySQL VIEW&quot;">​</a></h3><p>A virtual table created from a SQL query. Used to transform database schemas that don&#39;t match operator requirements.</p><p><strong>Use cases:</strong></p><ul><li>Transform <code>&quot;active&quot;</code>/<code>&quot;inactive&quot;</code> to <code>&quot;1&quot;</code>/<code>&quot;0&quot;</code></li><li>Combine multiple columns</li><li>Add computed fields</li><li>Filter sensitive data</li></ul><p><strong>Example:</strong></p><div class="language-sql line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#F97583;">CREATE</span><span style="color:#F97583;"> VIEW</span><span style="color:#B392F0;"> node_configs</span><span style="color:#F97583;"> AS</span></span>
<span class="line"><span style="color:#F97583;">SELECT</span><span style="color:#E1E4E8;"> id, </span><span style="color:#F97583;">url</span><span style="color:#E1E4E8;">, </span><span style="color:#F97583;">CASE</span><span style="color:#F97583;"> WHEN</span><span style="color:#F97583;"> status=</span><span style="color:#9ECBFF;">&#39;active&#39;</span><span style="color:#F97583;"> THEN</span><span style="color:#9ECBFF;"> &#39;1&#39;</span><span style="color:#F97583;"> ELSE</span><span style="color:#9ECBFF;"> &#39;0&#39;</span><span style="color:#F97583;"> END</span><span style="color:#F97583;"> AS</span><span style="color:#E1E4E8;"> is_active </span><span style="color:#F97583;">FROM</span><span style="color:#E1E4E8;"> nodes;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>See <a href="./datasource.html">DataSource Guide</a> for detailed examples.</p><h2 id="template-system" tabindex="-1">Template System <a class="header-anchor" href="#template-system" aria-label="Permalink to &quot;Template System&quot;">​</a></h2><h3 id="template" tabindex="-1">Template <a class="header-anchor" href="#template" aria-label="Permalink to &quot;Template&quot;">​</a></h3><p>Go <code>text/template</code> syntax with Sprig function library. Used to dynamically generate Kubernetes resource specifications.</p><div><p><strong>Syntax:</strong></p><ul><li>Variables: <code>{{ .uid }}</code>, <code>{{ .host }}</code></li><li>Functions: <code>{{ .uid | trunc63 }}</code>, <code>{{ .config | fromJson }}</code></li><li>Conditionals: <code>{{ if .planId }}...{{ end }}</code></li></ul></div><h3 id="template-variables" tabindex="-1">Template Variables <a class="header-anchor" href="#template-variables" aria-label="Permalink to &quot;Template Variables&quot;">​</a></h3><p>Data available in template rendering context:</p><p><strong>Required (from valueMappings):</strong></p><ul><li><code>.uid</code> - Node unique identifier</li><li><code>.hostOrUrl</code> - Original URL from database</li><li><code>.host</code> - Auto-extracted hostname from <code>.hostOrUrl</code></li><li><code>.activate</code> - Activation status (truthy/falsy)</li></ul><p><strong>Metadata:</strong></p><ul><li><code>.hubId</code> - LynqHub name</li><li><code>.templateRef</code> - LynqForm name</li></ul><p><strong>Custom (from extraValueMappings):</strong></p><ul><li>Any additional database columns (e.g., <code>.planId</code>, <code>.region</code>)</li></ul><h3 id="template-functions" tabindex="-1">Template Functions <a class="header-anchor" href="#template-functions" aria-label="Permalink to &quot;Template Functions&quot;">​</a></h3><p>Built-in and custom functions available in templates:</p><p><strong>Custom Functions:</strong></p><ul><li><code>toHost(url)</code> - Extract hostname from URL</li><li><code>trunc63(s)</code> - Truncate to 63 characters (Kubernetes name limit)</li><li><code>sha1sum(s)</code> - SHA1 hash of string</li><li><code>fromJson(s)</code> - Parse JSON string to object</li></ul><p><strong>Sprig Functions (200+):</strong></p><ul><li>String: <code>trim</code>, <code>upper</code>, <code>lower</code>, <code>replace</code>, <code>split</code></li><li>Encoding: <code>b64enc</code>, <code>b64dec</code>, <code>sha256sum</code></li><li>Defaults: <code>default</code>, <code>coalesce</code>, <code>ternary</code></li><li>Collections: <code>list</code>, <code>dict</code>, <code>merge</code></li><li>And many more: See <a href="https://masterminds.github.io/sprig/" target="_blank" rel="noreferrer">Sprig documentation</a></li></ul><h3 id="nametemplate" tabindex="-1">nameTemplate <a class="header-anchor" href="#nametemplate" aria-label="Permalink to &quot;nameTemplate&quot;">​</a></h3><p>A template string that generates the <code>metadata.name</code> for a Kubernetes resource.</p><p><strong>Requirements:</strong></p><ul><li>Must result in valid Kubernetes name (lowercase, alphanumeric, <code>-</code>)</li><li>Maximum 63 characters (use <code>trunc63</code> function)</li><li>Must be unique within namespace</li></ul><p><strong>Example:</strong></p>`,34),e("div",null,[e("div",{class:"language-yaml line-numbers-mode"},[e("button",{title:"Copy Code",class:"copy"}),e("span",{class:"lang"},"yaml"),e("pre",{class:"shiki github-dark vp-code",tabindex:"0","v-pre":""},[e("code",null,[e("span",{class:"line"},[e("span",{style:{color:"#85E89D"}},"nameTemplate"),e("span",{style:{color:"#E1E4E8"}},": "),e("span",{style:{color:"#9ECBFF"}},'"{{ .uid }}-app"')]),a(`
`),e("span",{class:"line"},[e("span",{style:{color:"#85E89D"}},"nameTemplate"),e("span",{style:{color:"#E1E4E8"}},": "),e("span",{style:{color:"#9ECBFF"}},'"{{ .uid | trunc63 }}"')])])]),e("div",{class:"line-numbers-wrapper","aria-hidden":"true"},[e("span",{class:"line-number"},"1"),e("br"),e("span",{class:"line-number"},"2"),e("br")])])],-1),t('<h2 id="resource-management" tabindex="-1">Resource Management <a class="header-anchor" href="#resource-management" aria-label="Permalink to &quot;Resource Management&quot;">​</a></h2><h3 id="server-side-apply-ssa" tabindex="-1">Server-Side Apply (SSA) <a class="header-anchor" href="#server-side-apply-ssa" aria-label="Permalink to &quot;Server-Side Apply (SSA)&quot;">​</a></h3><p>A Kubernetes API mechanism for declarative resource management. The operator uses SSA as the default apply strategy.</p><p><strong>Benefits:</strong></p><ul><li>Conflict-free updates (multiple controllers can manage same resource)</li><li>Field-level ownership tracking</li><li>Automatic drift correction</li></ul><p><strong>Field Manager:</strong> <code>lynq</code></p><p><strong>Reference:</strong> <a href="https://kubernetes.io/docs/reference/using-api/server-side-apply/" target="_blank" rel="noreferrer">Kubernetes SSA Documentation</a></p><h3 id="fieldmanager" tabindex="-1">fieldManager <a class="header-anchor" href="#fieldmanager" aria-label="Permalink to &quot;fieldManager&quot;">​</a></h3><p>The identifier used in Server-Side Apply to track which controller owns which fields.</p><p><strong>Value:</strong> <code>lynq</code></p><p>All resources applied by Lynq are marked with this field manager.</p><h3 id="tresource" tabindex="-1">TResource <a class="header-anchor" href="#tresource" aria-label="Permalink to &quot;TResource&quot;">​</a></h3><p>The base structure for all resources in LynqForm. Contains:</p><ul><li><code>id</code> - Unique identifier within template</li><li><code>spec</code> - Kubernetes resource specification</li><li><code>dependIds</code> - Dependency list (topological ordering)</li><li>Policies: <code>creationPolicy</code>, <code>deletionPolicy</code>, <code>conflictPolicy</code>, <code>patchStrategy</code></li><li>Templates: <code>nameTemplate</code>, <code>labelsTemplate</code>, <code>annotationsTemplate</code></li><li>Readiness: <code>waitForReady</code>, <code>timeoutSeconds</code></li></ul><p><strong>Resource types:</strong></p><ul><li><code>serviceAccounts</code></li><li><code>deployments</code>, <code>statefulSets</code>, <code>daemonSets</code></li><li><code>services</code></li><li><code>configMaps</code>, <code>secrets</code></li><li><code>persistentVolumeClaims</code></li><li><code>jobs</code>, <code>cronJobs</code></li><li><code>ingresses</code></li><li><code>manifests</code> (raw YAML for custom resources)</li></ul><h3 id="ownerreference" tabindex="-1">ownerReference <a class="header-anchor" href="#ownerreference" aria-label="Permalink to &quot;ownerReference&quot;">​</a></h3><p>A Kubernetes metadata field that establishes parent-child relationships between resources.</p><p><strong>In Lynq:</strong></p><ul><li>Resources with <code>deletionPolicy: Delete</code> (default) have <code>ownerReference</code> pointing to their LynqNode CR</li><li>Enables automatic garbage collection by Kubernetes when LynqNode is deleted</li><li>Resources with <code>deletionPolicy: Retain</code> use label-based tracking instead (NO ownerReference)</li></ul><h3 id="drift-detection" tabindex="-1">Drift Detection <a class="header-anchor" href="#drift-detection" aria-label="Permalink to &quot;Drift Detection&quot;">​</a></h3><p>The process of detecting and correcting manual changes to operator-managed resources.</p><p><strong>Lynq uses dual-layer detection:</strong></p><p><strong>Event-Driven (Immediate):</strong></p><ul><li>Watches 11 resource types (Deployments, Services, ConfigMaps, etc.)</li><li>Triggers reconciliation on generation/annotation changes</li><li>Smart predicates filter status-only updates</li></ul><p><strong>Periodic (30 seconds):</strong></p><ul><li>Regular reconciliation ensures eventual consistency</li><li>Detects child resource status changes</li><li>Balances responsiveness with cluster resource usage</li></ul><p><strong>Result:</strong> Manual changes are automatically reverted to template-defined state.</p><h2 id="policies" tabindex="-1">Policies <a class="header-anchor" href="#policies" aria-label="Permalink to &quot;Policies&quot;">​</a></h2><p>Policies control resource lifecycle behavior in LynqForm.</p><h3 id="creationpolicy" tabindex="-1">CreationPolicy <a class="header-anchor" href="#creationpolicy" aria-label="Permalink to &quot;CreationPolicy&quot;">​</a></h3><p>Controls when resources are created/updated.</p><p><strong>Values:</strong></p><ul><li><code>WhenNeeded</code> (default) - Reapply when spec changes or state requires it</li><li><code>Once</code> - Create only once, never reapply (for init Jobs, immutable resources)</li></ul><p><strong>Use cases for <code>Once</code>:</strong></p><ul><li>Initialization Jobs</li><li>Secret generation</li><li>Certificate creation</li><li>Database migrations</li></ul><h3 id="deletionpolicy" tabindex="-1">DeletionPolicy <a class="header-anchor" href="#deletionpolicy" aria-label="Permalink to &quot;DeletionPolicy&quot;">​</a></h3><p>Controls resource lifecycle and tracking mechanism. Evaluated at resource <strong>creation time</strong>, not deletion time.</p><p><strong>Values:</strong></p><ul><li><code>Delete</code> (default) - Uses ownerReference for automatic cleanup when LynqNode is deleted</li><li><code>Retain</code> - Uses label-based tracking only (no ownerReference), resource persists after LynqNode deletion</li></ul><p><strong>Use cases for <code>Retain</code>:</strong></p><ul><li>Persistent data (PVCs, Databases)</li><li>Shared infrastructure</li><li>Resources needing manual cleanup</li><li>Protection from accidental deletion</li></ul><h3 id="conflictpolicy" tabindex="-1">ConflictPolicy <a class="header-anchor" href="#conflictpolicy" aria-label="Permalink to &quot;ConflictPolicy&quot;">​</a></h3><p>Controls behavior when resource already exists with different owner.</p><p><strong>Values:</strong></p><ul><li><code>Stuck</code> (default) - Stop reconciliation, mark LynqNode as Degraded, emit event</li><li><code>Force</code> - Use SSA with <code>force=true</code> to take ownership</li></ul><p><strong>Use <code>Force</code> when:</strong></p><ul><li>Migrating from manual to operator management</li><li>Multiple operators need to share resources</li><li>Recovering from operator failures</li></ul><p><strong>Warning:</strong> <code>Force</code> can cause conflicts with other controllers.</p><h3 id="node" tabindex="-1">Node <a class="header-anchor" href="#node" aria-label="Permalink to &quot;Node&quot;">​</a></h3><p>See <a href="#lynqnode">LynqNode</a>. In earlier versions of this project, nodes were called &quot;tenants&quot;.</p><h3 id="patchstrategy" tabindex="-1">PatchStrategy <a class="header-anchor" href="#patchstrategy" aria-label="Permalink to &quot;PatchStrategy&quot;">​</a></h3><p>The method used to update Kubernetes resources.</p><p><strong>Values:</strong></p><ul><li><code>apply</code> (default) - Server-Side Apply (SSA) with conflict management</li><li><code>merge</code> - Strategic Merge Patch (preserves fields not in patch)</li><li><code>replace</code> - Full replacement via Update (replace entire resource)</li></ul><p><strong>Recommendation:</strong> Use <code>apply</code> (default) unless you have specific requirements.</p><h2 id="dependency-management" tabindex="-1">Dependency Management <a class="header-anchor" href="#dependency-management" aria-label="Permalink to &quot;Dependency Management&quot;">​</a></h2><h3 id="dependids" tabindex="-1">dependIds <a class="header-anchor" href="#dependids" aria-label="Permalink to &quot;dependIds&quot;">​</a></h3><p>An array of resource IDs that must be created before the current resource.</p><p><strong>Example:</strong></p>',60),e("div",null,[e("div",{class:"language-yaml line-numbers-mode"},[e("button",{title:"Copy Code",class:"copy"}),e("span",{class:"lang"},"yaml"),e("pre",{class:"shiki github-dark vp-code",tabindex:"0","v-pre":""},[e("code",null,[e("span",{class:"line"},[e("span",{style:{color:"#85E89D"}},"deployments"),e("span",{style:{color:"#E1E4E8"}},":")]),a(`
`),e("span",{class:"line"},[e("span",{style:{color:"#E1E4E8"}},"  - "),e("span",{style:{color:"#85E89D"}},"id"),e("span",{style:{color:"#E1E4E8"}},": "),e("span",{style:{color:"#9ECBFF"}},"app-deploy")]),a(`
`),e("span",{class:"line"},[e("span",{style:{color:"#85E89D"}},"    dependIds"),e("span",{style:{color:"#E1E4E8"}},": ["),e("span",{style:{color:"#9ECBFF"}},'"app-config"'),e("span",{style:{color:"#E1E4E8"}},"]  "),e("span",{style:{color:"#6A737D"}},"# Wait for configmap")])])]),e("div",{class:"line-numbers-wrapper","aria-hidden":"true"},[e("span",{class:"line-number"},"1"),e("br"),e("span",{class:"line-number"},"2"),e("br"),e("span",{class:"line-number"},"3"),e("br")])])],-1),t('<p><strong>Use cases:</strong></p><ul><li>PersistentVolumeClaim must exist before StatefulSet</li><li>ConfigMap/Secret must exist before Deployment</li><li>Service must exist before Ingress</li></ul><h3 id="dependency-graph-dag" tabindex="-1">Dependency Graph (DAG) <a class="header-anchor" href="#dependency-graph-dag" aria-label="Permalink to &quot;Dependency Graph (DAG)&quot;">​</a></h3><p>A Directed Acyclic Graph representing resource creation order based on <code>dependIds</code>.</p><p><strong>Properties:</strong></p><ul><li>Nodes: Resources</li><li>Edges: Dependencies</li><li>Must be acyclic (no circular dependencies)</li></ul><p><strong>Validation:</strong> Operator detects cycles at admission time and rejects invalid templates.</p><h3 id="topological-sort" tabindex="-1">Topological Sort <a class="header-anchor" href="#topological-sort" aria-label="Permalink to &quot;Topological Sort&quot;">​</a></h3><p>An algorithm that determines the correct order to create resources based on their dependencies.</p><p><strong>Process:</strong></p><ol><li>Build dependency graph from <code>dependIds</code></li><li>Detect cycles (fail if found)</li><li>Sort resources in dependency order</li><li>Apply resources sequentially</li></ol><p><strong>Result:</strong> Resources are created in the correct order, respecting dependencies.</p><h2 id="resource-readiness" tabindex="-1">Resource Readiness <a class="header-anchor" href="#resource-readiness" aria-label="Permalink to &quot;Resource Readiness&quot;">​</a></h2><h3 id="waitforready" tabindex="-1">waitForReady <a class="header-anchor" href="#waitforready" aria-label="Permalink to &quot;waitForReady&quot;">​</a></h3><p>A boolean flag (per resource) that determines if the operator should wait for resource readiness before proceeding.</p><p><strong>Default:</strong> <code>true</code></p><p><strong>When false:</strong> Operator applies resource and immediately moves to next one (fire-and-forget).</p><p><strong>Use cases for <code>false</code>:</strong></p><ul><li>Services (typically ready immediately)</li><li>ConfigMaps/Secrets (no readiness concept)</li><li>Background Jobs</li><li>Resources where readiness doesn&#39;t matter</li></ul><h3 id="timeoutseconds" tabindex="-1">timeoutSeconds <a class="header-anchor" href="#timeoutseconds" aria-label="Permalink to &quot;timeoutSeconds&quot;">​</a></h3><p>Maximum duration (in seconds) to wait for resource readiness.</p><p><strong>Default:</strong> 300 (5 minutes) <strong>Maximum:</strong> 3600 (1 hour)</p><p><strong>Behavior on timeout:</strong> Resource marked as failed, LynqNode marked as Degraded.</p><h3 id="ready-condition" tabindex="-1">Ready Condition <a class="header-anchor" href="#ready-condition" aria-label="Permalink to &quot;Ready Condition&quot;">​</a></h3><p>A Kubernetes status condition indicating resource health. Different resource types have different readiness criteria:</p><table tabindex="0"><thead><tr><th>Resource Type</th><th>Ready When</th></tr></thead><tbody><tr><td>Deployment</td><td><code>availableReplicas &gt;= replicas</code> AND <code>observedGeneration == generation</code></td></tr><tr><td>StatefulSet</td><td><code>readyReplicas == replicas</code></td></tr><tr><td>Job</td><td><code>succeeded &gt;= 1</code></td></tr><tr><td>Service</td><td>Immediate (or <code>waitForReady=false</code> recommended)</td></tr><tr><td>Namespace</td><td>Immediate after creation</td></tr><tr><td>Custom Resources</td><td><code>status.conditions[type=Ready].status=True</code></td></tr></tbody></table><h2 id="status-and-observability" tabindex="-1">Status and Observability <a class="header-anchor" href="#status-and-observability" aria-label="Permalink to &quot;Status and Observability&quot;">​</a></h2><h3 id="lynqnode-status" tabindex="-1">LynqNode Status <a class="header-anchor" href="#lynqnode-status" aria-label="Permalink to &quot;LynqNode Status&quot;">​</a></h3><p>The <code>status</code> field in LynqNode CR tracks resource provisioning state:</p><p><strong>Fields:</strong></p><ul><li><code>conditions</code> - Array of status conditions <ul><li><code>Ready</code> - All resources are ready</li><li><code>Degraded</code> - Some resources failed</li></ul></li><li><code>desiredResources</code> - Total count of resources to create</li><li><code>readyResources</code> - Count of ready resources</li><li><code>failedResources</code> - Count of failed resources</li><li><code>lastSyncTime</code> - Timestamp of last successful reconciliation</li></ul><p><strong>Ready calculation:</strong> <code>Ready = (readyResources == desiredResources) AND (failedResources == 0)</code></p><h3 id="hub-status" tabindex="-1">Hub Status <a class="header-anchor" href="#hub-status" aria-label="Permalink to &quot;Hub Status&quot;">​</a></h3><p>The <code>status</code> field in LynqHub CR tracks node provisioning across all forms:</p><p><strong>Fields:</strong></p><ul><li><code>desired</code> - Expected LynqNode count: <code>referencingTemplates × activeRows</code></li><li><code>ready</code> - Count of Ready LynqNodes across all forms</li><li><code>failed</code> - Count of failed LynqNodes across all forms</li><li><code>lastSyncTime</code> - Timestamp of last database sync</li><li><code>referencingTemplates</code> - List of forms using this hub</li></ul><p><strong>Example:</strong></p><ul><li>Active database rows: 10</li><li>Referencing forms: 2</li><li>Desired: 20 (10 rows × 2 forms)</li></ul><h3 id="reconciliation" tabindex="-1">Reconciliation <a class="header-anchor" href="#reconciliation" aria-label="Permalink to &quot;Reconciliation&quot;">​</a></h3><p>The control loop process where the operator compares desired state (from templates) with actual state (in cluster) and takes action to converge them.</p><p><strong>Lynq reconciliation layers:</strong></p><p><strong>1. LynqHub Reconciliation:</strong></p><ul><li>Query database at <code>syncInterval</code></li><li>Calculate desired LynqNode set</li><li>Create/update/delete LynqNode CRs</li></ul><p><strong>2. LynqForm Reconciliation:</strong></p><ul><li>Validate template-registry linkage</li><li>Ensure template consistency</li></ul><p><strong>3. LynqNode Reconciliation:</strong></p><ul><li>Render templates with node data</li><li>Build dependency graph</li><li>Apply resources in topological order</li><li>Wait for readiness</li><li>Update status</li></ul><p><strong>Triggers:</strong></p><ul><li>Database sync timer (syncInterval)</li><li>CRD changes (create/update/delete)</li><li>Child resource changes (event-driven)</li><li>Periodic requeue (30 seconds)</li></ul><h3 id="requeue" tabindex="-1">Requeue <a class="header-anchor" href="#requeue" aria-label="Permalink to &quot;Requeue&quot;">​</a></h3><p>The act of scheduling a resource for re-reconciliation after a delay.</p><p><strong>Lynq requeue patterns:</strong></p><ul><li><strong>Immediate:</strong> Error conditions, conflicts</li><li><strong>30 seconds:</strong> Normal reconciliation cycle (fast status reflection)</li><li><strong>syncInterval:</strong> Database polling (e.g., 1 minute)</li></ul><h2 id="multi-form-support" tabindex="-1">Multi-Form Support <a class="header-anchor" href="#multi-form-support" aria-label="Permalink to &quot;Multi-Form Support&quot;">​</a></h2><h3 id="multi-form" tabindex="-1">Multi-Form <a class="header-anchor" href="#multi-form" aria-label="Permalink to &quot;Multi-Form&quot;">​</a></h3><p>The capability for one LynqHub to be referenced by multiple LynqForms.</p><p><strong>Use cases:</strong></p><ul><li>Multi-environment deployments (prod, staging, dev)</li><li>A/B testing configurations</li><li>Regional variations</li><li>Different service tiers</li></ul><p><strong>Example:</strong></p>',59),e("div",null,[e("div",{class:"language-yaml line-numbers-mode"},[e("button",{title:"Copy Code",class:"copy"}),e("span",{class:"lang"},"yaml"),e("pre",{class:"shiki github-dark vp-code",tabindex:"0","v-pre":""},[e("code",null,[e("span",{class:"line"},[e("span",{style:{color:"#6A737D"}},"# Hub: my-hub (5 active rows)")]),a(`
`),e("span",{class:"line"},[e("span",{style:{color:"#6A737D"}},"# Form 1: prod-form (hubId: my-hub)")]),a(`
`),e("span",{class:"line"},[e("span",{style:{color:"#6A737D"}},"# Form 2: staging-form (hubId: my-hub)")]),a(`
`),e("span",{class:"line"},[e("span",{style:{color:"#6A737D"}},"# Result: 10 LynqNode CRs (5 rows × 2 forms)")])])]),e("div",{class:"line-numbers-wrapper","aria-hidden":"true"},[e("span",{class:"line-number"},"1"),e("br"),e("span",{class:"line-number"},"2"),e("br"),e("span",{class:"line-number"},"3"),e("br"),e("span",{class:"line-number"},"4"),e("br")])])],-1),t('<h3 id="referencing-forms" tabindex="-1">Referencing Forms <a class="header-anchor" href="#referencing-forms" aria-label="Permalink to &quot;Referencing Forms&quot;">​</a></h3><p>LynqForms that reference a specific LynqHub via <code>spec.hubId</code>.</p><p><strong>Tracked in:</strong> <code>LynqHub.status.referencingTemplates</code></p><p><strong>Used for:</strong> Calculating desired LynqNode count:</p><div class="language- line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span>desired = len(referencingForms) × activeRows</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h3 id="desired-count-calculation" tabindex="-1">Desired Count Calculation <a class="header-anchor" href="#desired-count-calculation" aria-label="Permalink to &quot;Desired Count Calculation&quot;">​</a></h3><p>Formula for determining expected number of LynqNode CRs:</p><div class="language- line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span>LynqHub.status.desired = referencingTemplates × activeRows</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p><strong>Example:</strong></p><ul><li>Active database rows: 10</li><li>Referencing forms: 3</li><li>Desired: 30</li></ul><p><strong>Purpose:</strong> Ensures strong consistency between data source and cluster state.</p><h2 id="performance-optimization" tabindex="-1">Performance Optimization <a class="header-anchor" href="#performance-optimization" aria-label="Permalink to &quot;Performance Optimization&quot;">​</a></h2><h3 id="smart-watch-predicates" tabindex="-1">Smart Watch Predicates <a class="header-anchor" href="#smart-watch-predicates" aria-label="Permalink to &quot;Smart Watch Predicates&quot;">​</a></h3><p>Filtering logic that prevents unnecessary reconciliations by ignoring irrelevant resource changes.</p><p><strong>Filters out:</strong></p><ul><li>Status-only updates</li><li>Metadata changes (except annotations)</li><li>ResourceVersion changes</li></ul><p><strong>Triggers reconciliation only on:</strong></p><ul><li>Generation changes (spec updates)</li><li>Annotation changes</li><li>Resource deletion</li></ul><p><strong>Impact:</strong> Significantly reduces reconciliation overhead.</p><h3 id="namespace-tracking" tabindex="-1">Namespace Tracking <a class="header-anchor" href="#namespace-tracking" aria-label="Permalink to &quot;Namespace Tracking&quot;">​</a></h3><p>Label-based mechanism for tracking namespace ownership without ownerReferences (not allowed on cluster-scoped resources).</p><p><strong>Implementation:</strong></p><ul><li>Namespaces labeled with: <code>lynq.sh/node: &lt;lynqnode-name&gt;</code> and <code>lynq.sh/node-namespace: &lt;lynqnode-namespace&gt;</code></li><li>Watch predicate filters by label</li><li>Enables efficient namespace-specific reconciliation</li></ul><h3 id="concurrency" tabindex="-1">Concurrency <a class="header-anchor" href="#concurrency" aria-label="Permalink to &quot;Concurrency&quot;">​</a></h3><p>The number of parallel reconciliation workers.</p><p><strong>Configuration:</strong></p><ul><li><code>--node-concurrency=N</code> (default: 10) - Concurrent LynqNode reconciliations</li><li><code>--form-concurrency=N</code> (default: 5) - Concurrent Form reconciliations</li><li><code>--hub-concurrency=N</code> (default: 3) - Concurrent Hub syncs</li></ul><p><strong>Tradeoff:</strong> Higher concurrency = faster processing, more resource usage.</p><h2 id="webhooks-and-validation" tabindex="-1">Webhooks and Validation <a class="header-anchor" href="#webhooks-and-validation" aria-label="Permalink to &quot;Webhooks and Validation&quot;">​</a></h2><h3 id="webhook" tabindex="-1">Webhook <a class="header-anchor" href="#webhook" aria-label="Permalink to &quot;Webhook&quot;">​</a></h3><p>An HTTP callback mechanism for intercepting Kubernetes API requests before they&#39;re persisted.</p><p><strong>Lynq webhooks:</strong></p><ul><li><strong>ValidatingWebhook:</strong> Reject invalid LynqHub/LynqForm CRs</li><li><strong>MutatingWebhook:</strong> Set default values (policies, timeouts)</li></ul><p><strong>Requires:</strong> TLS certificates (managed by cert-manager)</p><h3 id="cert-manager" tabindex="-1">cert-manager <a class="header-anchor" href="#cert-manager" aria-label="Permalink to &quot;cert-manager&quot;">​</a></h3><p>A Kubernetes add-on that automates TLS certificate management.</p><p><strong>Used for:</strong> Webhook server TLS certificates</p><p><strong>Installation:</strong></p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#B392F0;">kubectl</span><span style="color:#9ECBFF;"> apply</span><span style="color:#79B8FF;"> -f</span><span style="color:#9ECBFF;"> https://github.com/cert-manager/cert-manager/releases/download/v1.13.0/cert-manager.yaml</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p><strong>Benefits:</strong></p><ul><li>Automatic certificate issuance</li><li>Automatic renewal before expiration</li><li>CA bundle injection into webhook configurations</li></ul><p><strong>Required:</strong> Lynq cannot run without cert-manager.</p><h3 id="validation-rules" tabindex="-1">Validation Rules <a class="header-anchor" href="#validation-rules" aria-label="Permalink to &quot;Validation Rules&quot;">​</a></h3><p>Checks performed by ValidatingWebhook:</p><p><strong>LynqHub:</strong></p><ul><li><code>valueMappings</code> must include required keys: <code>uid</code>, <code>hostOrUrl</code>, <code>activate</code></li><li><code>syncInterval</code> must be valid duration (e.g., <code>1m</code>, not <code>1 minute</code>)</li><li>Database connection details must be valid</li></ul><p><strong>LynqForm:</strong></p><ul><li><code>spec.hubId</code> must reference existing LynqHub</li><li><code>TResource.id</code> must be unique within template</li><li><code>dependIds</code> must not form cycles</li><li>Templates must be valid Go template syntax</li><li>Policies must be valid enum values</li></ul><h2 id="garbage-collection-and-finalizers" tabindex="-1">Garbage Collection and Finalizers <a class="header-anchor" href="#garbage-collection-and-finalizers" aria-label="Permalink to &quot;Garbage Collection and Finalizers&quot;">​</a></h2><h3 id="finalizer" tabindex="-1">Finalizer <a class="header-anchor" href="#finalizer" aria-label="Permalink to &quot;Finalizer&quot;">​</a></h3><p>A Kubernetes mechanism that prevents resource deletion until cleanup tasks complete.</p><p><strong>Lynq finalizer:</strong> <code>lynqnode.operator.lynq.sh/finalizer</code></p><p><strong>Added to:</strong> LynqNode CRs</p><p><strong>Purpose:</strong> Ensures proper cleanup of resources when LynqNode is deleted (respecting <code>deletionPolicy</code>).</p><h3 id="cascade-deletion" tabindex="-1">Cascade Deletion <a class="header-anchor" href="#cascade-deletion" aria-label="Permalink to &quot;Cascade Deletion&quot;">​</a></h3><p>The automatic deletion of child resources when parent resource is deleted.</p><p><strong>In Lynq:</strong></p><p><strong>Normal flow:</strong></p><div class="language- line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span>LynqNode CR deleted → Finalizer runs → Resources deleted (per deletionPolicy) → Finalizer removed → LynqNode CR removed</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p><strong>Warning:</strong></p><div class="language- line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span>LynqHub deleted → All LynqNode CRs deleted (ownerReference) → All node resources deleted</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p><strong>Protection:</strong> Set <code>deletionPolicy: Retain</code> on critical resources BEFORE deleting LynqHub/LynqForm.</p><p>See <a href="./policies.html#️-important-protecting-nodes-from-cascade-deletion">Policies Guide - Cascade Deletion</a> for details.</p><h2 id="kubernetes-concepts" tabindex="-1">Kubernetes Concepts <a class="header-anchor" href="#kubernetes-concepts" aria-label="Permalink to &quot;Kubernetes Concepts&quot;">​</a></h2><h3 id="custom-resource-definition-crd" tabindex="-1">Custom Resource Definition (CRD) <a class="header-anchor" href="#custom-resource-definition-crd" aria-label="Permalink to &quot;Custom Resource Definition (CRD)&quot;">​</a></h3><p>A Kubernetes extension mechanism that allows defining custom resource types.</p><p><strong>Lynq CRDs:</strong></p><ul><li><code>lynqhubs.operator.lynq.sh</code></li><li><code>lynqforms.operator.lynq.sh</code></li><li><code>lynqnodes.operator.lynq.sh</code></li></ul><h3 id="controller" tabindex="-1">Controller <a class="header-anchor" href="#controller" aria-label="Permalink to &quot;Controller&quot;">​</a></h3><p>A control loop that watches Kubernetes resources and takes actions to move current state toward desired state.</p><p><strong>Lynq controllers:</strong></p><ol><li>LynqHub Controller</li><li>LynqForm Controller</li><li>LynqNode Controller</li></ol><h3 id="reconciliation-loop" tabindex="-1">Reconciliation Loop <a class="header-anchor" href="#reconciliation-loop" aria-label="Permalink to &quot;Reconciliation Loop&quot;">​</a></h3><p>See <a href="#reconciliation">Reconciliation</a> above.</p><h3 id="leader-election" tabindex="-1">Leader Election <a class="header-anchor" href="#leader-election" aria-label="Permalink to &quot;Leader Election&quot;">​</a></h3><p>A mechanism ensuring only one instance of the operator is actively reconciling resources (for high availability deployments).</p><p><strong>Configuration:</strong> <code>--leader-elect</code> flag (default: enabled)</p><h3 id="kubernetes-api-server" tabindex="-1">Kubernetes API Server <a class="header-anchor" href="#kubernetes-api-server" aria-label="Permalink to &quot;Kubernetes API Server&quot;">​</a></h3><p>The central management entity in Kubernetes that exposes the Kubernetes API. All operator interactions go through the API server.</p><h3 id="etcd" tabindex="-1">etcd <a class="header-anchor" href="#etcd" aria-label="Permalink to &quot;etcd&quot;">​</a></h3><p>The distributed key-value store used by Kubernetes to persist cluster state. The operator reads/writes all resources to etcd via the API server.</p><h2 id="development-and-operations" tabindex="-1">Development and Operations <a class="header-anchor" href="#development-and-operations" aria-label="Permalink to &quot;Development and Operations&quot;">​</a></h2><h3 id="minikube" tabindex="-1">Minikube <a class="header-anchor" href="#minikube" aria-label="Permalink to &quot;Minikube&quot;">​</a></h3><p>A tool for running a single-node Kubernetes cluster locally for development and testing.</p><p><strong>Lynq Minikube setup:</strong></p><ul><li>See <a href="./quickstart.html">Quick Start</a> for automated scripts</li><li>See <a href="./local-development-minikube.html">Local Development</a> for development workflow</li></ul><h3 id="server-side-apply-ssa-engine" tabindex="-1">Server-Side Apply (SSA) Engine <a class="header-anchor" href="#server-side-apply-ssa-engine" aria-label="Permalink to &quot;Server-Side Apply (SSA) Engine&quot;">​</a></h3><p>The internal component in Lynq that applies Kubernetes resources using Server-Side Apply.</p><p><strong>Features:</strong></p><ul><li>Conflict detection and resolution</li><li>Field-level ownership tracking</li><li>Automatic drift correction</li><li>Support for multiple patch strategies</li></ul><p><strong>Location:</strong> <code>internal/apply/</code></p><h3 id="apply-engine" tabindex="-1">Apply Engine <a class="header-anchor" href="#apply-engine" aria-label="Permalink to &quot;Apply Engine&quot;">​</a></h3><p>See <a href="#server-side-apply-ssa-engine">Server-Side Apply (SSA) Engine</a> above.</p><h3 id="template-engine" tabindex="-1">Template Engine <a class="header-anchor" href="#template-engine" aria-label="Permalink to &quot;Template Engine&quot;">​</a></h3><p>The internal component that renders Go templates with node data.</p><p><strong>Features:</strong></p><ul><li>Variable substitution</li><li>Function execution (Sprig + custom)</li><li>Error handling and validation</li><li>Template caching</li></ul><p><strong>Location:</strong> <code>internal/template/</code></p><h2 id="metrics-and-monitoring" tabindex="-1">Metrics and Monitoring <a class="header-anchor" href="#metrics-and-monitoring" aria-label="Permalink to &quot;Metrics and Monitoring&quot;">​</a></h2><h3 id="prometheus-metrics" tabindex="-1">Prometheus Metrics <a class="header-anchor" href="#prometheus-metrics" aria-label="Permalink to &quot;Prometheus Metrics&quot;">​</a></h3><p>Time-series metrics exposed by the operator for monitoring.</p><p><strong>Key metrics:</strong></p><ul><li><code>lynqnode_reconcile_duration_seconds{result}</code> - Reconciliation duration</li><li><code>lynqnode_resources_ready{lynqnode}</code> - Ready resource count per node</li><li><code>hub_desired</code> - Expected LynqNode count</li><li><code>hub_ready</code> - Ready LynqNode count</li><li><code>hub_failed</code> - Failed LynqNode count</li><li><code>apply_attempts_total{kind, result, conflict_policy}</code> - Apply attempts</li></ul><p><strong>Endpoint:</strong> <code>http://operator:8080/metrics</code></p><h3 id="health-checks" tabindex="-1">Health Checks <a class="header-anchor" href="#health-checks" aria-label="Permalink to &quot;Health Checks&quot;">​</a></h3><p>HTTP endpoints for liveness and readiness probes.</p><p><strong>Endpoints:</strong></p><ul><li><code>/healthz</code> - Liveness probe (is operator running?)</li><li><code>/readyz</code> - Readiness probe (is operator ready to reconcile?)</li></ul><h2 id="common-abbreviations" tabindex="-1">Common Abbreviations <a class="header-anchor" href="#common-abbreviations" aria-label="Permalink to &quot;Common Abbreviations&quot;">​</a></h2><table tabindex="0"><thead><tr><th>Abbreviation</th><th>Full Term</th></tr></thead><tbody><tr><td>SSA</td><td>Server-Side Apply</td></tr><tr><td>CRD</td><td>Custom Resource Definition</td></tr><tr><td>CR</td><td>Custom Resource</td></tr><tr><td>DAG</td><td>Directed Acyclic Graph</td></tr><tr><td>RBAC</td><td>Role-Based Access Control</td></tr><tr><td>TLS</td><td>Transport Layer Security</td></tr><tr><td>API</td><td>Application Programming Interface</td></tr><tr><td>K8s</td><td>Kubernetes (8 letters between K and s)</td></tr><tr><td>PVC</td><td>PersistentVolumeClaim</td></tr><tr><td>SA</td><td>ServiceAccount</td></tr></tbody></table><h2 id="see-also" tabindex="-1">See Also <a class="header-anchor" href="#see-also" aria-label="Permalink to &quot;See Also&quot;">​</a></h2><ul><li><a href="./api.html">API Reference</a> - Complete CRD specification</li><li><a href="./templates.html">Template Guide</a> - Template syntax and examples</li><li><a href="./policies.html">Policies Guide</a> - Lifecycle policies in detail</li><li><a href="./datasource.html">DataSource Guide</a> - MySQL configuration and VIEWs</li><li><a href="./quickstart.html">Quick Start</a> - Get started in 5 minutes</li></ul>',112)])])}const g=n(l,[["render",s]]);export{b as __pageData,g as default};
